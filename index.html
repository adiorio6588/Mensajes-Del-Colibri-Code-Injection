<!-- ======================================
 Mensajes del Colibrí – Sections + MODALS (Video + Written modals have Tally)
 Use this in a Systeme.io "Custom HTML" block on the page
 (Background is handled by your Code Injection)
====================================== -->

<section id="mdc-app-sections">

  <!-- HERO -->
  <section class="mdc-hero mdc-section visible">
    <div class="mdc-wrap mdc-hero-grid">
      <div>
        <span class="mdc-badge">Guía Celestial • Celestial Guidance</span>
        <h1>Mensajes del Colibrí</h1>

        <p class="mdc-lead">
          Lectura profunda de 7 cartas canalizada con intención.<br>
          <em>Deep 7-card tarot reading channeled with intention.</em><br><br>
          Video personal o mensaje escrito por email.<br>
          <em>Personal video or written message by email.</em>
        </p>

        <div class="mdc-actions">
          <a href="#mdc-form" class="mdc-btn" data-mdc-open="mdc-modal-book">
            Reservar lectura • Book reading
          </a>
        </div>
      </div>

      <div class="mdc-oracle-card">
        <strong>
          Lectura Sagrada Única<br>
          <em>Single Sacred Reading</em>
        </strong><br><br>
        7 cartas • Entrega personalizada<br>
        <em>7 cards • Personalized delivery</em><br><br>
        24–48 horas
      </div>
    </div>
  </section>

  <!-- THE READING -->
  <section class="mdc-section">
    <div class="mdc-wrap">
      <h2>
        La Lectura<br>
        <em>The Reading</em>
      </h2>

      <p class="mdc-sub">
        Cada lectura es un espacio sagrado de claridad y guía.<br>
        <em>Each reading is a sacred space for clarity and guidance.</em>
      </p>

      <div class="mdc-grid-3">
        <div class="mdc-box">
          <h3>
            7 Cartas<br>
            <em>7 Cards</em>
          </h3>
          <p>
            Explora tu energía, bloqueos, mensajes del universo
            y el camino a seguir.<br>
            <em>
              Explores your energy, blocks, universal messages,
              and the path forward.
            </em>
          </p>
        </div>

        <div class="mdc-box">
          <h3>
            Entrega Personalizada<br>
            <em>Personal Delivery</em>
          </h3>
          <p>
            Tu lectura se entrega como video personal
            o mensaje escrito por email, según tu elección.<br>
            <em>
              Your reading is delivered as a personal video
              or a written message by email, based on your choice.
            </em>
          </p>
        </div>

        <div class="mdc-box">
          <h3>
            Mensaje Canalizado<br>
            <em>Channeled Message</em>
          </h3>
          <p>
            Realizada con intención, respeto
            y conexión espiritual.<br>
            <em>
              Performed with intention, respect,
              and spiritual connection.
            </em>
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- HOW IT WORKS -->
  <section class="mdc-section dark">
    <div class="mdc-wrap">
      <h2>
        Cómo Funciona<br>
        <em>How It Works</em>
      </h2>

      <div class="mdc-grid-3">
        <div class="mdc-box">
          <h3>
            1. Intención<br>
            <em>Intention</em>
          </h3>
          <p>
            Escribe tu pregunta con el corazón abierto.<br>
            <em>Write your question with an open heart.</em>
          </p>
        </div>

        <div class="mdc-box">
          <h3>
            2. Lectura<br>
            <em>The Reading</em>
          </h3>
          <p>
            Se realiza una lectura profunda de 7 cartas.<br>
            <em>A deep 7-card reading is performed.</em>
          </p>
        </div>

        <div class="mdc-box">
          <h3>
            3. Mensaje<br>
            <em>Your Message</em>
          </h3>
          <p>
            Recibes tu lectura por email en 24–48 horas.<br>
            <em>You receive your reading by email within 24–48 hours.</em>
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- "FORM" SECTION (2 CTAs only) -->
  <section id="mdc-form" class="mdc-section">
    <div class="mdc-wrap">
      <h2>
        Reservar Lectura<br>
        <em>Book Your Reading</em>
      </h2>

      <p class="mdc-sub">
        Elige tu tipo de entrega y envía tu intención desde el formulario.<br>
        <em>Choose your delivery type and send your intention via the form.</em>
      </p>

      <!-- ONLY TWO CARDS NOW -->
      <div class="mdc-grid-2">
        <div class="mdc-box">
          <h3>Video Personal<br><em>Personal Video</em></h3>
          <p>
            Respuesta en video, cálida y directa.<br>
            <em>Warm, direct video response.</em>
          </p>
          <a href="#" class="mdc-btn small" data-mdc-open="mdc-modal-video">Elegir • Choose</a>
        </div>

        <div class="mdc-box">
          <h3>Email Escrito<br><em>Written Email</em></h3>
          <p>
            Mensaje escrito para releer cuando lo necesites.<br>
            <em>Written message you can re-read anytime.</em>
          </p>
          <a href="#" class="mdc-btn small" data-mdc-open="mdc-modal-written">Elegir • Choose</a>
        </div>
      </div>

      <p class="mdc-note">
        Guía espiritual y de entretenimiento.<br>
        <em>Spiritual guidance for entertainment purposes.</em><br>
        No reemplaza consejo médico, legal o financiero.<br>
        <em>Does not replace medical, legal, or financial advice.</em>
      </p>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="mdc-footer">
    © <span class="mdc-year"></span> Mensajes del Colibrí
  </footer>

</section>

<!-- =========================
     MODALS
========================= -->

<!-- Overlay -->
<div class="mdc-modal-overlay" id="mdc-modal-overlay" aria-hidden="true"></div>

<!-- Book modal (hub) -->
<div class="mdc-modal" id="mdc-modal-book" role="dialog" aria-modal="true" aria-labelledby="mdc-book-title" aria-hidden="true">
  <div class="mdc-modal-card">
    <button class="mdc-modal-x" type="button" aria-label="Close" data-mdc-close>×</button>
    <h3 id="mdc-book-title" class="mdc-modal-title">
      Reservar Lectura<br><em>Book Your Reading</em>
    </h3>
    <p class="mdc-modal-sub">
      Elige tu tipo de entrega para abrir el formulario.<br>
      <em>Choose your delivery type to open the form.</em>
    </p>

    <div class="mdc-modal-grid">
      <button class="mdc-btn modal-btn" type="button" data-mdc-swap="mdc-modal-video">Video Personal • Personal Video</button>
      <button class="mdc-btn modal-btn" type="button" data-mdc-swap="mdc-modal-written">Email Escrito • Written Email</button>
    </div>
  </div>
</div>

<!-- Video modal -->
<div class="mdc-modal" id="mdc-modal-video" role="dialog" aria-modal="true" aria-labelledby="mdc-video-title" aria-hidden="true">
  <div class="mdc-modal-card">
    <button class="mdc-modal-x" type="button" aria-label="Close" data-mdc-close>×</button>
    <h3 id="mdc-video-title" class="mdc-modal-title">
      Video Personal<br><em>Personal Video</em>
    </h3>
    <p class="mdc-modal-sub">
      Completa el formulario para tu lectura en video.<br>
      <em>Complete the form for your video reading.</em>
    </p>

    <!-- TALLY EMBED (VIDEO) -->
    <div class="mdc-form-frame glow-target">
      <iframe
        data-tally-src="https://tally.so/embed/lbqx1N?alignLeft=1&hideTitle=1&transparentBackground=1&dynamicHeight=1"
        loading="lazy"
        width="100%"
        height="579"
        frameborder="0"
        marginheight="0"
        marginwidth="0"
        title="Personalized Reading - Video"
        style="border:0; border-radius:14px;"
      ></iframe>
    </div>

    <p class="mdc-note">
      Tiempo estimado: 24–48 horas.<br><em>Estimated time: 24–48 hours.</em>
    </p>
  </div>
</div>

<!-- Written modal -->
<div class="mdc-modal" id="mdc-modal-written" role="dialog" aria-modal="true" aria-labelledby="mdc-written-title" aria-hidden="true">
  <div class="mdc-modal-card">
    <button class="mdc-modal-x" type="button" aria-label="Close" data-mdc-close>×</button>
    <h3 id="mdc-written-title" class="mdc-modal-title">
      Email Escrito<br><em>Written Email</em>
    </h3>
    <p class="mdc-modal-sub">
      Completa el formulario para tu lectura escrita.<br>
      <em>Complete the form for your written reading.</em>
    </p>

    <!-- TALLY EMBED (WRITTEN) -->
    <div class="mdc-form-frame glow-target">
      <iframe
        data-tally-src="https://tally.so/embed/OD4NP7?alignLeft=1&hideTitle=1&transparentBackground=1&dynamicHeight=1"
        loading="lazy"
        width="100%"
        height="579"
        frameborder="0"
        marginheight="0"
        marginwidth="0"
        title="Personalized Reading - Written Email"
        style="border:0; border-radius:14px;"
      ></iframe>
    </div>

    <p class="mdc-note">
      Tiempo estimado: 24–48 horas.<br><em>Estimated time: 24–48 hours.</em>
    </p>
  </div>
</div>

<style>
/* Scoped styles ONLY for this block */
#mdc-app-sections{
  color:#f5f5f5;
  font-family:"Georgia","Times New Roman",serif;
  position:relative;
  z-index:2; 
}

#mdc-app-sections .mdc-wrap{max-width:1100px;margin:auto;padding:0 18px}
#mdc-app-sections h1{font-size:54px;margin:14px 0}
#mdc-app-sections h2{font-size:36px;margin-bottom:14px}
#mdc-app-sections h3{margin:0 0 10px}
#mdc-app-sections p{line-height:1.7}
#mdc-app-sections em{opacity:.75}
#mdc-app-sections .mdc-sub{margin-bottom:30px}
#mdc-app-sections .mdc-note{opacity:.75;margin-top:22px}

/* Sections + reveal */
#mdc-app-sections .mdc-section{
  position:relative;
  padding:110px 0;
  opacity:0;
  transform:translateY(40px);
  transition:opacity 1.2s ease, transform 1.2s ease;
}
#mdc-app-sections .mdc-section.visible{opacity:1;transform:none}

/* Dark band */
#mdc-app-sections .mdc-section.dark{
  background:rgba(2,2,2,.65);
}

/* Hero grid */
#mdc-app-sections .mdc-hero-grid{
  display:grid;
  grid-template-columns:1.2fr .8fr;
  gap:36px;
}
#mdc-app-sections .mdc-badge{
  color:#ffd78c;
  letter-spacing:.32em;
  font-size:11px;
  text-transform:uppercase;
}
#mdc-app-sections .mdc-actions{margin-top:32px}

/* CTA */
#mdc-app-sections .mdc-btn{
  border:1px solid rgba(218,165,32,.65);
  background:linear-gradient(135deg, rgba(218,165,32,.18), rgba(120,80,255,.14));
  padding:14px 26px;
  border-radius:44px;
  color:#fff;
  display:inline-block;
  transition:.35s ease;
  box-shadow:0 0 0 rgba(218,165,32,0);
  text-decoration:none;
  cursor:pointer;
}
#mdc-app-sections .mdc-btn:hover{
  box-shadow:0 0 55px rgba(218,165,32,.55);
  transform:translateY(-1px);
}
#mdc-app-sections .mdc-btn.small{padding:12px 18px;border-radius:34px;font-size:14px}
#mdc-app-sections .mdc-btn.ghost{background:transparent}

/* Cards */
#mdc-app-sections .mdc-box,
#mdc-app-sections .mdc-oracle-card,
#mdc-app-sections .mdc-form-frame{
  border:1px solid rgba(218,165,32,.5);
  background:rgba(0,0,0,.55);
  border-radius:22px;
  padding:24px;
  position:relative;
  backdrop-filter:blur(10px);
  -webkit-backdrop-filter:blur(10px);
  box-shadow:0 18px 60px rgba(0,0,0,.55);
}
#mdc-app-sections .mdc-box::before,
#mdc-app-sections .mdc-oracle-card::before,
#mdc-app-sections .mdc-form-frame::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:22px;
  pointer-events:none;
  background:
    radial-gradient(700px 220px at 20% 0%, rgba(255,215,140,.14), transparent 60%),
    radial-gradient(600px 220px at 80% 0%, rgba(140,120,255,.10), transparent 60%);
  opacity:.75;
}

/* 3-column grid (used elsewhere) */
#mdc-app-sections .mdc-grid-3{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:22px;
}

/* 2-column grid (for booking cards) */
#mdc-app-sections .mdc-grid-2{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:22px;
}

/* Glow pulse */
@keyframes glowPulse{
  0%{box-shadow:0 0 0 rgba(218,165,32,0)}
  50%{box-shadow:0 0 70px rgba(218,165,32,.85)}
  100%{box-shadow:0 0 0 rgba(218,165,32,0)}
}
#mdc-app-sections .glow-active{animation:glowPulse 3.2s ease-in-out}

/* Footer */
#mdc-app-sections .mdc-footer{
  text-align:center;
  padding:40px;
  opacity:.6;
  border-top:1px solid rgba(255,255,255,.12);
}

/* Mobile */
@media(max-width:900px){
  #mdc-app-sections .mdc-hero-grid,
  #mdc-app-sections .mdc-grid-3,
  #mdc-app-sections .mdc-grid-2{grid-template-columns:1fr}
  #mdc-app-sections h1{font-size:42px}
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce){
  #mdc-app-sections .mdc-section{transition:none;transform:none;opacity:1}
}

/* =========================
   MODAL STYLES
========================= */
.mdc-modal-overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.65);
  backdrop-filter:blur(6px);
  -webkit-backdrop-filter:blur(6px);
  opacity:0;
  pointer-events:none;
  transition:opacity .25s ease;
  z-index:9998;
}
.mdc-modal{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:24px;
  opacity:0;
  pointer-events:none;
  transition:opacity .25s ease, transform .25s ease;
  transform:translateY(10px);
  z-index:9999;
}
.mdc-modal.is-open,
.mdc-modal-overlay.is-open{
  opacity:1;
  pointer-events:auto;
  transform:none;
}
.mdc-modal-card{
  width:min(860px, 100%);
  max-height:min(80vh, 760px);
  overflow:auto;
  border:1px solid rgba(218,165,32,.5);
  background:rgba(0,0,0,.62);
  border-radius:22px;
  padding:22px;
  position:relative;
  backdrop-filter:blur(12px);
  -webkit-backdrop-filter:blur(12px);
  box-shadow:0 26px 90px rgba(0,0,0,.75);
}
.mdc-modal-card::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:22px;
  pointer-events:none;
  background:
    radial-gradient(700px 220px at 20% 0%, rgba(255,215,140,.14), transparent 60%),
    radial-gradient(600px 220px at 80% 0%, rgba(140,120,255,.10), transparent 60%);
  opacity:.75;
}
.mdc-modal-title{margin:0 0 8px; position:relative}
.mdc-modal-sub{margin:0 0 18px; opacity:.85; position:relative}
.mdc-modal-x{
  position:absolute;
  top:10px;
  right:12px;
  width:42px;
  height:42px;
  border-radius:50%;
  border:1px solid rgba(218,165,32,.5);
  background:rgba(0,0,0,.35);
  color:#fff;
  font-size:26px;
  line-height:1;
  cursor:pointer;
  z-index:1;
}
.mdc-modal-grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:12px;
  position:relative;
}
.modal-btn{width:100%; text-align:center}
@media(max-width:900px){
  .mdc-modal-grid{grid-template-columns:1fr}
}
</style>

<script>
/* Scroll reveal (scoped) */
document.querySelectorAll('#mdc-app-sections .mdc-section').forEach(sec=>{
  new IntersectionObserver(entries=>{
    entries.forEach(e=>{
      if(e.isIntersecting){
        e.target.classList.add('visible');
      }
    });
  },{threshold:.15}).observe(sec);
});

/* Year (scoped) */
document.querySelectorAll('#mdc-app-sections .mdc-year').forEach(el=>{
  el.textContent=new Date().getFullYear();
});

/* Smooth scroll + glow (scoped) */
document.querySelectorAll('#mdc-app-sections a[href^="#"]').forEach(a=>{
  a.addEventListener('click',e=>{
    const isModalOpen = a.hasAttribute("data-mdc-open");
    if(isModalOpen){
      e.preventDefault();
      return;
    }
    const el=document.querySelector(a.getAttribute('href'));
    if(!el) return;
    e.preventDefault();
    el.scrollIntoView({behavior:"smooth"});
    if(el.id==="mdc-form"){
      setTimeout(()=>document.querySelector("#mdc-app-sections .glow-target")?.classList.add("glow-active"),600);
      setTimeout(()=>document.querySelector("#mdc-app-sections .glow-target")?.classList.remove("glow-active"),4200);
    }
  });
});

/* =========================
   MODAL LOGIC
========================= */
const overlay = document.getElementById("mdc-modal-overlay");
const modals = Array.from(document.querySelectorAll(".mdc-modal"));

function closeAllModals(){
  modals.forEach(m=>m.classList.remove("is-open"));
  overlay?.classList.remove("is-open");
  document.body.style.overflow = "";
}

function openModal(id){
  const modal = document.getElementById(id);
  if(!modal) return;
  overlay?.classList.add("is-open");
  modal.classList.add("is-open");
  document.body.style.overflow = "hidden";
  modal.querySelector("[data-mdc-close]")?.focus();
}

document.addEventListener("click", (e)=>{
  const openBtn = e.target.closest("[data-mdc-open]");
  if(openBtn){
    e.preventDefault();
    openModal(openBtn.getAttribute("data-mdc-open"));
    return;
  }

  const closeBtn = e.target.closest("[data-mdc-close]");
  if(closeBtn){
    e.preventDefault();
    closeAllModals();
    return;
  }

  // swap modal
  const swapBtn = e.target.closest("[data-mdc-swap]");
  if(swapBtn){
    e.preventDefault();
    const to = swapBtn.getAttribute("data-mdc-swap");
    closeAllModals();
    openModal(to);
    return;
  }

  // click overlay closes
  if(e.target === overlay){
    closeAllModals();
  }
});

document.addEventListener("keydown", (e)=>{
  if(e.key === "Escape"){
    closeAllModals();
  }
});

/* =========================
   TALLY LOADER
========================= */
(function(){
  var d=document, w="https://tally.so/widgets/embed.js";
  var v=function(){
    if(typeof Tally!=="undefined") Tally.loadEmbeds();
    else d.querySelectorAll('iframe[data-tally-src]:not([src])').forEach(function(e){
      e.src=e.dataset.tallySrc;
    });
  };
  if(typeof Tally!=="undefined") v();
  else if(!d.querySelector('script[src="'+w+'"]')){
    var s=d.createElement("script");
    s.src=w; s.onload=v; s.onerror=v;
    d.body.appendChild(s);
  }
})();
</script>
